<ngx-loading [show]="loading"></ngx-loading>
<div class="container-fluid px-1">
  <div class="row mx-0">
    <div class="col-sm-12 col-xs-12 col-lg-12 col-md-12 px-1 mt-4">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0 ml-auto">Users</h5>
        </div>
        <div class="card-body p-0" [collapse]="isCollapsed1">
          <div class="row justify-content-between mx-0">
            <div class="m-2 ml-3" style="padding-top: 2px">
              <strong
                style="font-size: 16px; letter-spacing: 1px; color: #e53e3e"
                translate
                >Filters:
              </strong>
              <strong *ngIf="!userTableFilter" style="color: #536c79" translate>
                No Filter Selected</strong
              >
              <span class="filter-tabs" *ngFor="let filter of userTableFilter">
                {{ filter }}
                <a
                  (click)="clearFilterUserTable(filter)"
                  class="pl-2 cursor-pointer"
                  >&times;</a
                >
              </span>
            </div>
            <div class="d-flex justify-content-end" style="flex-wrap: wrap">
              <i
                class="fa fa-plus-circle mtt mr-3"
                title="Add User"
                (click)="openCreateUserModal()"
              >
              </i>
              <i
                class="fa fa-pencil-square-o mtt mr-3"
                title="Edit User"
                (click)="openEditModal()"
                *ngIf="usersList.length != 0"
              >
              </i>
              <i
                class="fa fa-key mtt mr-3"
                title="Update Password"
                (click)="openSetPasswordModal()"
                *ngIf="usersList.length != 0"
              >
              </i>
              <i
                class="fa fa-lock mtt mr-3"
                *ngIf="isDisable == 1 && usersList.length != 0"
                title="Lock User"
                (click)="smModal.show()"
              >
              </i>
              <i
                class="fa fa-unlock mtt mr-3"
                *ngIf="isDisable == 2 && usersList.length != 0"
                title="Unlock User"
                (click)="lgModal.show()"
              >
              </i>
              <i
                class="fa fa-user-times mtt mr-3"
                *ngIf="isActive == 1 && usersList.length != 0"
                title="Deactivate User"
                (click)="sm1Modal.show()"
              >
              </i>
              <i
                class="fa fa-user mtt mr-3"
                *ngIf="isActive == 2 && usersList.length != 0"
                title="Activate User"
                (click)="sm2Modal.show()"
              >
              </i>
            </div>
          </div>
          <ag-grid-angular
            id="userTable"
            name="userTable"
            #userTable
            class="ag-theme-balham usertable"
            style="width: 100%; height: calc(50vh - 156px); min-height: 170px"
            class="ag-theme-balham mt-2"
            (filterChanged)="filterModifiedUserTable()"
            [rowClassRules]="rowClassRulesUserTable"
            [gridOptions]="gridOptionsUserTable"
            (gridReady)="sizeToFitUserTable()"
            (rowClicked)="rowClicked($event)"
            [rowData]="rowDataUserTable"
            [columnDefs]="columnDefsUserTable"
          >
          </ag-grid-angular>
        </div>
      </div>
    </div>

    <div class="col-sm-12 col-xs-12 col-lg-8 col-md-8 pl-1 pr-1 mt-2">
      <div class="card">
        <div class="card-header bg-purple text-white">
          <div class="row">
            <div class="col-12 forellipsis">
              <h5 class="mb-0 ml-auto">
                {{ "User Roles for" }} {{ selectedUserObj.firstName }}
                {{ selectedUserObj.lastName }}
              </h5>
            </div>
          </div>
        </div>
        <div class="card-body p-0" [collapse]="isCollapsed2">
          <div class="row justify-content-between mx-0">
            <div class="ml-3 m-2" style="padding-top: 2px">
              <strong
                style="font-size: 16px; letter-spacing: 1px; color: #e53e3e"
                translate
                >Filters:
              </strong>
              <strong *ngIf="!roleTableFilter" style="color: #536c79" translate>
                No Filter Selected</strong
              >
              <span class="filter-tabs" *ngFor="let filter of roleTableFilter">
                {{ filter }}
                <a (click)="clearFilterRoleTable(filter)" class="cursor-pointer"
                  >&times;</a
                >
              </span>
            </div>
            <div class="d-flex justify-content-end" style="flex-wrap: wrap">
              <i
                class="fa fa-plus-circle mtt mr-3"
                title="Add Role"
                (click)="openCreateRoleModal()"
              >
              </i>
              <i
                class="fa fa-pencil-square-o mtt mr-3"
                title="Edit Role"
                (click)="openEditRoleModal()"
              >
              </i>
            </div>
          </div>
          <ag-grid-angular
            id="agTable"
            name="agGrid"
            #agGrid
            style="width: 100%; height: calc(50vh - 200px); min-height: 150px"
            class="ag-theme-balham"
            [gridOptions]="gridOptions"
            [rowClassRules]="rowClassRulesRole"
            [rowData]="rowData"
            (rowClicked)="rolesRowClicked($event)"
            [columnDefs]="columnDefs"
            (filterChanged)="filterModifiedRoleTable()"
            (gridReady)="sizeToFitUserTableForRole()"
          ></ag-grid-angular>
          <div class="form-inline mb-2" class="text-center my-3">
            <button
              type="button"
              class="btn btn-sm btn-danger mr-2"
              (click)="lg1Modal.show()"
              translate
            >
              <i class="fa fa-remove mr-1"> </i>Terminate Role
            </button>
            <button
              type="button"
              class="btn btn-sm btn-success"
              (click)="lg2Modal.show()"
              translate
            >
              <i class="fa fa-check mr-1"></i>Assign Role
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-12 col-xs-12 col-lg-4 col-md-4 pl-1 pr-2 mt-2">
      <div class="card">
        <div class="card-header bg-purple text-white">
          <div class="row">
            <div class="col-12 forellipsis">
              <h5 class="mb-0 ml-auto">
                {{ "Role Permissions for" }}
                <span style="font-weight: bold">{{ roleName }}</span>
              </h5>
            </div>
          </div>
        </div>
        <div class="card-body p-0" [collapse]="isCollapsed3">
          <ag-grid-angular id="permission" name="permission" #permission
            style="width: 100%;height: calc(50vh - 95px);min-height: 250px;" class="ag-theme-balham"
            [gridOptions]="gridOptionsPermission" [rowClassRules]="rowClassRulespermission" [rowData]="rolePermissions" [frameworkComponents]="frameworkComponents"
            [columnDefs]="columnDefsPermission" (gridReady)="sizeToFitPermissionTable()"></ag-grid-angular>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Create New User Modal -->
<div
  class="modal fade"
  bsModal
  #createUserModal="bs-modal"
  [config]="{ backdrop: 'static' }"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-static-name"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content display-width">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-static-name" class="modal-title pull-left" translate>
          Create User
        </h5>
        <button
          type="button"
          class="close pull-right text-white"
          aria-label="Close"
          (click)="closeCreateUserModal()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form #createUserForm="ngForm">
            <div class="row">
              <div class="col-sm-12 col-12 col-md-12 col-lg-12 col-xl-8 p-1">
                <div class="card bg-sblue">
                  <div class="card-header bg-purple pt-1 pb-1" translate>
                    <h5 class="mb-0 ml-auto">General Information</h5>
                  </div>
                  <div class="card-body p-3">
                    <div class="row">
                      <div class="col-12 col-sm-2 pr-0">
                        <img
                          [src]="photo"
                          alt=""
                          class="img-thumbnail img-rounded img-responsive"
                        />
                      </div>
                      <div class="col-12 col-sm-10">
                        <div class="form-row">
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="firstName" translate
                              >First Name<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <input
                              type="text"
                              name="firstName"
                              class="form-control form-control-sm"
                              pattern="[A-Za-z0-9]{1,}"
                              id="firstName"
                              placeholder="First Name"
                              [(ngModel)]="newUser.firstName"
                              (keyup)="setLoginId()"
                              required
                            />
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="middleName" translate
                              >Middle Name</label
                            >
                            <input
                              type="text"
                              name="middleName"
                              class="form-control form-control-sm"
                              pattern="[A-Za-z0-9]{1,}"
                              id="middleName"
                              placeholder="Middle Name"
                              [(ngModel)]="newUser.middleName"
                              (keyup)="setLoginId()"
                            />
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="lastname" translate
                              >Last Name<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <input
                              type="text"
                              name="lastname"
                              class="form-control form-control-sm"
                              pattern="[A-Za-z0-9]{1,}"
                              id="lastname"
                              placeholder="Last Name"
                              [(ngModel)]="newUser.lastName"
                              (keyup)="setLoginId()"
                              required
                            />
                          </div>
                        </div>
                        <div class="form-row">
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="loginId" translate
                              >Login ID<span class="text-danger">*</span></label
                            >
                            <input
                              type="text"
                              name="loginId"
                              class="form-control form-control-sm"
                              id="loginId"
                              (keyup)="checkForDuplicateLoginId()"
                              [(ngModel)]="newUser.loginId"
                            />
                            <span
                              *ngIf="
                                isDuplicateLoginId &&
                                newUser.loginId != null &&
                                newUser.loginId != ''
                              "
                              class="text-danger text-red"
                              translate
                              >LoginId Already Exists</span
                            >
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="role"
                              >Default Role<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <select
                              id="role"
                              name="role"
                              class="form-control form-control-sm"
                              [(ngModel)]="selectedRoleObject"
                              (change)="selectedRole($event)"
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let role of roleDataObject"
                                value="{{ role.roleId }}"
                              >
                                {{ role.roleName }}
                              </option>
                            </select>
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="timezone" translate
                              >Timezone<span class="text-danger">*</span></label
                            >
                            <select
                              id="timezone"
                              name="timezone"
                              class="form-control form-control-sm"
                              [(ngModel)]="newUser.timezone"
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option>Asia/Calcutta</option>
                              <option>US/Central</option>
                              <option>US/Eastern</option>
                              <option>UTC</option>
                            </select>
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="organisation" translate
                              >Organization<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <select
                              name="organisation"
                              id="organisation"
                              class="form-control form-control-sm"
                              [(ngModel)]="
                                newUser.orgUser[0].organization.orgId
                              "
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let organization of organizationList"
                                value="{{ organization.orgId }}"
                              >
                                {{ organization.orgName }}
                              </option>
                            </select>
                          </div>
                          <div class="form-group col-sm-3 col-md-3 col-lg-4">
                            <label for="language" translate
                              >Language<span class="text-danger">*</span></label
                            >
                            <select
                              id="language"
                              name="language"
                              class="form-control form-control-sm"
                              [(ngModel)]="newUser.language"
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option>English</option>
                            </select>
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="photoInput" translate>Photo</label>
                            <div class="form-inline">
                              <input
                                type="file"
                                #photoInput
                                id="photoInput"
                                name="pic"
                                accept="image/*"
                                (change)="uploadPhoto($event)"
                              />
                            </div>
                          </div>
                          <!-- <div class="form-group col-sm-4 col-md-4 col-lg-3">
                            <div class="form-inline" style="margin-top: 40px;">
                              <input class="form-check-input mt-1" name="gridCheckNewUser" type="checkbox"
                                id="gridCheckNewUser" (change)="changeExternalUser()"
                                [checked]="newUser.externalUser=='Y'">
                              <label class="form-check-label" for="gridCheckNewUser" translate>
                                External User ?
                              </label>
                            </div>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-12 col-md-12 col-lg-12 col-xl-4 p-1">
                <div class="card">
                  <div class="card-header bg-purple pt-1 pb-1" translate>
                    <h5 class="mb-0 ml-auto">Address Details</h5>
                  </div>
                  <div class="card-body p-3">
                    <div class="row">
                      <div class="col-12">
                        <div class="form-row">
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-4 col-lg-2 col-xl-6
                            "
                          >
                            <label for="address1" translate>Address 1</label>
                            <input
                              type="email"
                              name="address1"
                              class="form-control form-control-sm"
                              id="address1"
                              placeholder="Address 1"
                              [(ngModel)]="newUser.address1"
                            />
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-4 col-lg-2 col-xl-6
                            "
                          >
                            <label for="address2" translate>Address 2</label>
                            <input
                              type="text"
                              name="address2"
                              class="form-control form-control-sm"
                              id="address2"
                              placeholder="Address 2"
                              [(ngModel)]="newUser.address2"
                            />
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-4 col-lg-2 col-xl-6
                            "
                          >
                            <label for="inputState" translate>Country</label>
                            <select
                              id="inputState"
                              name="inputState"
                              class="form-control form-control-sm"
                              (change)="changeCountry(newUser.country)"
                              [(ngModel)]="newUser.country"
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let country of countries"
                                value="{{ country.name }}"
                                translate
                              >
                                {{ country.name }}
                              </option>
                            </select>
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-6 col-lg-3 col-xl-6
                            "
                          >
                            <label for="inputCity1" translate>City</label>
                            <select
                              name="inputCity1"
                              class="form-control form-control-sm"
                              id="inputCity1"
                              [(ngModel)]="newUser.city"
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let state of selectedCountry.states"
                                value="{{ state }}"
                                translate
                              >
                                {{ state }}
                              </option>
                            </select>
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-6 col-lg-3 col-xl-12
                            "
                          >
                            <label for="inputZip" translate>Zip/Pin</label>
                            <input
                              type="number"
                              name="inputZip"
                              class="form-control form-control-sm"
                              id="inputZip"
                              placeholder="Zip/Pin"
                              [(ngModel)]="newUser.zip"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-12 col-md-12 col-lg-6 col-xl-6 p-1">
                <div class="card ht244">
                  <div class="card-header bg-purple pb-1 pt-1" translate>
                    <h5 class="mb-0 ml-auto">Contact Details</h5>
                  </div>
                  <div class="card-body p-3">
                    <div class="col-12 p-0">
                      <div class="form-row">
                        <div class="form-group col-sm-4 col-md-4 col-lg-7">
                          <label for="inputEmail4" translate
                            >Email Address<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="form-group mb-0 p-0">
                            <input
                              type="email"
                              name="inputEmail4"
                              email
                              class="form-control form-control-sm col-12"
                              id="inputEmail4"
                              placeholder="Email"
                              [(ngModel)]="newUser.emailAddress"
                              required
                            />
                          </div>
                        </div>
                        <div class="col-xl-5 pt-4 mt-2">
                          <div class="form-inline p-0 mt-1">
                            <input
                              class="mr-1"
                              type="checkbox"
                              id="gridCheckEmail"
                              name="gridCheckEmail"
                              [checked]="emailNotification"
                              (change)="emailNotification = !emailNotification"
                            />
                            <label
                              class="form-check-label"
                              for="gridCheckEmail"
                              translate
                            >
                              Email Notification
                            </label>
                          </div>
                        </div>
                        <div class="form-group col-sm-4 col-md-4 col-lg-7">
                          <label for="text" class="control-label" translate
                            >Mobile Phone<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="form-group p-0">
                            <input
                              type="text"
                              (keyup)="phoneValidation(newUser.mobileNumber, 1)"
                              name="inputPhone"
                              #inputPhone="ngModel"
                              class="form-control form-control-sm col-12"
                              id="inputPhone"
                              placeholder="Mobile phone"
                              [pattern]="pattern"
                              [(ngModel)]="newUser.mobileNumber"
                              required
                            />
                            <div
                              class="text-danger text-red"
                              *ngIf="
                                inputPhone.invalid &&
                                (inputPhone.dirty || inputPhone.touched) &&
                                newUser.mobileNumber != null &&
                                newUser.mobileNumber != ''
                              "
                              translate
                            >
                              Mobile number should start with either + Sign or
                              00.
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-5 pt-4 mt-2">
                          <div class="form-inline p-0 mt-1">
                            <input
                              class="mr-1"
                              type="checkbox"
                              name="gridCheckMobile"
                              id="gridCheckMobile"
                              [checked]="smsNotification"
                              (change)="smsNotification = !smsNotification"
                            />
                            <label
                              class="form-check-label"
                              for="gridCheckMobile"
                              translate
                              >SMS Notification</label
                            >
                          </div>
                        </div>
                        <div
                          class="form-inline col-sm-4 col-md-4 col-lg-12 mt-2"
                        >
                          <label
                            for="deskPhone"
                            translate
                            style="margin-right: 10px"
                            >Desk Phone</label
                          >
                          <input
                            type="number"
                            (keyup)="phoneValidation(newUser.phoneNumber, 2)"
                            name="deskPhone"
                            class="form-control form-control-sm"
                            id="deskPhone"
                            placeholder="Desk phone"
                            [(ngModel)]="newUser.phoneNumber"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-12 col-md-6 col-lg-6 col-xl- p-1 pr-0">
                <div class="card ht244">
                  <div class="card-header bg-purple pb-1 pt-1" translate>
                    <div class="d-flex">
                      <span class="ml-auto">
                        <h5 _ngcontent-cra-c164="" class="mb-0">Password</h5>
                      </span>
                      <i
                        class="fa fa fa-info-circle pull-right mt-2 ml-auto"
                        [tooltip]="passwordrules"
                        containerClass="tooltip-window"
                        placement="right"
                      ></i>
                    </div>
                  </div>
                  <div class="card-body p-3">
                    <div class="row">
                      <div class="col-12">
                        <div class="form-row">
                          <div class="form-group col-sm-6 col-md-12 col-lg-12">
                            <label for="password1" translate
                              >Password<span class="text-danger">*</span></label
                            >
                            <div class="row">
                              <div class="col-12 row mx-0">
                                <input
                                  type="password"
                                  #password1
                                  (keyup)="passwordEnterEvent()"
                                  name="password1"
                                  class="form-control form-control-sm col-12"
                                  id="password1"
                                  placeholder="Password"
                                  [(ngModel)]="newUser.userPassword[0].password"
                                  required
                                />
                                <span
                                  *ngIf="password1.type == 'password'"
                                  style="
                                    margin-left: -25px;
                                    z-index: 999;
                                    line-height: 1;
                                    margin-top: 4px;
                                    margin-bottom: 4px;
                                  "
                                  (click)="password1.type = 'text'"
                                  ><i
                                    class="fa fa-eye-slash"
                                    aria-hidden="true"
                                  ></i
                                ></span>
                                <span
                                  *ngIf="password1.type == 'text'"
                                  style="
                                    line-height: 1;
                                    margin-top: 4px;
                                    margin-bottom: 4px;
                                    margin-left: -25px;
                                    z-index: 999;
                                  "
                                  (click)="password1.type = 'password'"
                                  ><i class="fa fa-eye" aria-hidden="true"></i
                                ></span>
                              </div>
                            </div>
                          </div>
                          <div class="form-group col-sm-6 col-md-12 col-lg-12">
                            <label for="inputPassword4" translate
                              >Re-enter Password<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <div class="col-12 row px-0 mx-0">
                              <input
                                type="password"
                                #inputPassword4
                                (keyup)="passwordEnterEvent()"
                                class="form-control form-control-sm"
                                name="inputPassword4"
                                id="inputPassword4"
                                placeholder="Password"
                                [(ngModel)]="setPasswordObj.newPassword"
                                required
                              />
                              <span
                                *ngIf="inputPassword4.type == 'password'"
                                style="
                                  margin-left: -25px;
                                  z-index: 999;
                                  line-height: 1;
                                  margin-top: 4px;
                                  margin-bottom: 4px;
                                "
                                (click)="inputPassword4.type = 'text'"
                                ><i
                                  class="fa fa-eye-slash"
                                  aria-hidden="true"
                                ></i
                              ></span>
                              <span
                                *ngIf="inputPassword4.type == 'text'"
                                style="
                                  margin-left: -25px;
                                  z-index: 999;
                                  line-height: 1;
                                  margin-top: 4px;
                                  margin-bottom: 4px;
                                "
                                (click)="inputPassword4.type = 'password'"
                                ><i class="fa fa-eye" aria-hidden="true"></i
                              ></span>
                            </div>
                          </div>
                          <div class="form-group col-sm-6 col-md-12 mb-0">
                            <div class="form-row justify-content-between">
                              <div class="col-auto my-1">
                                <button
                                  type="submit"
                                  class="btn btn-sm btn-primary"
                                  (click)="validateCreatePassword()"
                                  translate
                                >
                                  <i class="fa fa-check fa-1x pr-1"></i>Validate
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <div class="row justify-content-center pt-3">
            <div class="text-center">
              <button
                class="btn btn-sm btn-secondary mr-2"
                (click)="closeCreateUserModal()"
                translate
              >
                <i class="fa fa-times mr-1"></i>Cancel
              </button>
              <button
                class="btn btn-sm btn-primary mr-2"
                (click)="resetCreateUserModal()"
                translate
              >
                <i class="fa fa-refresh mr-1"></i>Reset
              </button>
              <button
                class="btn btn-sm btn-success mr-2"
                (click)="saveWithoutActivate()"
                [disabled]="
                  createUserForm.invalid ||
                  isDuplicateLoginId ||
                  isInvalidPassword
                "
                translate
              >
                <i class="fa fa-save mr-1"></i>Save
              </button>
              <button
                class="btn btn-sm btn-success"
                (click)="saveWithActivate()"
                [disabled]="
                  createUserForm.invalid ||
                  isDuplicateLoginId ||
                  isInvalidPassword
                "
              >
                <i class="fa fa-save mr-1"></i>Save and Activate
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Edit User Modal -->
<div
  class="modal fade"
  bsModal
  #EditUserModal="bs-modal"
  [config]="{ backdrop: 'static' }"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-static-name"
>
  <div class="modal-dialog modal-2x">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-static-name" class="modal-title pull-left" translate>
          Edit Users
        </h5>
        <button
          type="button"
          class="close pull-right text-white"
          aria-label="Close"
          (click)="closeCreateUserModal()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form #EditUserForm="ngForm">
            <div class="row">
              <div class="col-sm-12 col-12 col-md-12 col-lg-12 col-xl-8 p-1">
                <div class="card ht274">
                  <div class="card-header bg-purple pt-1 pb-1" translate>
                    <h5 class="mb-0 ml-auto">General Information</h5>
                  </div>
                  <div class="card-body p-3">
                    <div class="row">
                      <div class="col-12 col-sm-2 pr-0">
                        <img
                          [src]="photo"
                          alt=""
                          class="img-thumbnail img-rounded img-responsive"
                        />
                      </div>
                      <div class="col-12 col-sm-10">
                        <div class="form-row">
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="firstNameedit" translate
                              >First Name<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <input
                              type="text"
                              name="firstNameedit"
                              class="form-control form-control-sm"
                              pattern="[A-Za-z0-9]{1,}"
                              id="firstNameedit"
                              placeholder="First Name"
                              [(ngModel)]="newUser.firstName"
                              required
                            />
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="middleNameedit" translate
                              >Middle Name</label
                            >
                            <input
                              type="text"
                              name="middleNameedit"
                              class="form-control form-control-sm"
                              pattern="[A-Za-z0-9]{1,}"
                              id="middleNameedit"
                              placeholder="Middle Name"
                              [(ngModel)]="newUser.middleName"
                            />
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="lastnameedit" translate
                              >Last Name<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <input
                              type="text"
                              name="lastnameedit"
                              class="form-control form-control-sm"
                              pattern="[A-Za-z0-9]{1,}"
                              id="lastnameedit"
                              placeholder="Last Name"
                              [(ngModel)]="newUser.lastName"
                              required
                            />
                          </div>
                        </div>
                        <div class="form-row">
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="loginIdedit" translate
                              >Login ID<span class="text-danger">*</span></label
                            >
                            <input
                              type="text"
                              name="loginIdedit"
                              class="form-control form-control-sm"
                              id="loginIdedit"
                              (keyup)="checkForDuplicateLoginId()"
                              [(ngModel)]="newUser.loginId"
                              readonly
                            />
                            <span
                              *ngIf="isDuplicateLoginId"
                              class="text-danger text-red"
                              translate
                              >LoginId Already Exists</span
                            >
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="timezoneedit" translate
                              >Timezone<span class="text-danger">*</span></label
                            >
                            <select
                              id="timezoneedit"
                              name="timezoneedit"
                              class="form-control form-control-sm"
                              [(ngModel)]="newUser.timezone"
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option>Asia/Calcutta</option>
                              <option>US/Central</option>
                              <option>US/Eastern</option>
                              <option>UTC</option>
                            </select>
                          </div>
                          <div class="form-group col-sm-4 col-md-4 col-lg-4">
                            <label for="organisationedit" translate
                              >Organization<span class="text-danger"
                                >*</span
                              ></label
                            >
                            <select
                              name="organisationedit"
                              id="organisationedit"
                              class="form-control form-control-sm"
                              [(ngModel)]="
                                newUser.orgUser[0].organization.orgId
                              "
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let organization of organizationList"
                                value="{{ organization.orgId }}"
                              >
                                {{ organization.orgName }}
                              </option>
                            </select>
                          </div>
                          <div class="form-group col-sm-3 col-md-3 col-lg-4">
                            <label for="languageedit" translate
                              >Language<span class="text-danger">*</span></label
                            >
                            <select
                              id="languageedit"
                              name="languageedit"
                              class="form-control form-control-sm"
                              [(ngModel)]="newUser.language"
                              required
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option>English</option>
                            </select>
                          </div>
                          <div class="form-group col-sm-5 col-md-5 col-lg-5">
                            <label for="pic" translate>Photo</label>
                            <div class="form-inline">
                              <input
                                type="file"
                                #photoInput
                                id="pic"
                                name="pic"
                                accept="image/*"
                                (change)="uploadPhoto($event)"
                              />
                            </div>
                          </div>
                          <!-- <div class="form-group col-sm-4 col-md-4 col-lg-3">
                            <div class="from-inline" style="margin-top: 40px;">
                              <input class="form-check-input mt-2" type="checkbox" name="gridCheckEdit"
                                id="gridCheckEdit" (change)="changeExternalUser()"
                                [checked]="newUser.externalUser=='Y'">
                              <label class="form-check-label" for="gridCheckEdit" translate>
                                External User ?
                              </label>
                            </div>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-12 col-md-12 col-lg-12 col-xl-4 p-1">
                <div class="card bg-sblue">
                  <div class="card-header bg-purple pt-1 pb-1" translate>
                    <h5 class="mb-0 ml-auto">Address Details</h5>
                  </div>
                  <div class="card-body p-3">
                    <div class="row">
                      <div class="col-12">
                        <div class="form-row">
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-4 col-lg-2 col-xl-6
                            "
                          >
                            <label for="address1edit" translate
                              >Address 1</label
                            >
                            <input
                              type="email"
                              name="address1edit"
                              class="form-control form-control-sm"
                              id="address1edit"
                              placeholder="Address 1"
                              [(ngModel)]="newUser.address1"
                            />
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-4 col-lg-2 col-xl-6
                            "
                          >
                            <label for="address2edit" translate
                              >Address 2</label
                            >
                            <input
                              type="text"
                              name="address2edit"
                              class="form-control form-control-sm"
                              id="address2edit"
                              placeholder="Address 2"
                              [(ngModel)]="newUser.address2"
                            />
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-4 col-lg-2 col-xl-6
                            "
                          >
                            <label for="inputStateedit" translate
                              >Country</label
                            >
                            <select
                              id="inputStateedit"
                              name="inputStateedit"
                              class="form-control form-control-sm"
                              (change)="changeCountry(newUser.country)"
                              [(ngModel)]="newUser.country"
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let country of countries"
                                value="{{ country.name }}"
                                translate
                              >
                                {{ country.name }}
                              </option>
                            </select>
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-6 col-lg-3 col-xl-6
                            "
                          >
                            <label for="inputCity1edit" translate>City</label>
                            <select
                              name="inputCity1edit"
                              class="form-control form-control-sm"
                              id="inputCity1edit"
                              [(ngModel)]="newUser.city"
                            >
                              <option value="null" [disabled]="true" translate>
                                Choose...
                              </option>
                              <option
                                *ngFor="let state of selectedCountry.states"
                                value="{{ state }}"
                                translate
                              >
                                {{ state }}
                              </option>
                            </select>
                          </div>
                          <div
                            class="
                              form-group
                              col-sm-6 col-md-6 col-lg-3 col-xl-12
                            "
                          >
                            <label for="inputZipedit" translate>Zip/Pin</label>
                            <input
                              type="number"
                              name="inputZipedit"
                              class="form-control form-control-sm"
                              id="inputZipedit"
                              placeholder="Zip/Pin"
                              [(ngModel)]="newUser.zip"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-12 col-md-12 col-lg-12 col-xl-12 p-1">
                <div class="card ht175">
                  <div class="card-header bg-purple pb-1 pt-1" translate>
                    <h5 class="mb-0 ml-auto">Contact Details</h5>
                  </div>
                  <div class="card-body p-3">
                    <div class="col-12 p-0">
                      <div class="form-row">
                        <div class="form-group col-sm-4 col-md-4 col-lg-4">
                          <label for="inputEmail4edit" translate
                            >Email Address<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="form-group p-0">
                            <input
                              type="email"
                              name="inputEmail4edit"
                              email
                              class="form-control form-control-sm col-12"
                              id="inputEmail4edit"
                              placeholder="Email"
                              [(ngModel)]="newUser.emailAddress"
                              required
                            />
                          </div>
                        </div>

                        <div class="form-group col-sm-4 col-md-4 col-lg-4">
                          <label
                            for="inputPhoneedit"
                            class="control-label"
                            translate
                            >Mobile Phone<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <div class="form-group p-0">
                            <input
                              type="text"
                              (keyup)="phoneValidation(newUser.mobileNumber, 1)"
                              name="inputPhoneedit"
                              #inputPhoneedit="ngModel"
                              class="form-control form-control-sm col-12"
                              id="inputPhoneedit"
                              placeholder="Mobile phone"
                              [pattern]="pattern"
                              [(ngModel)]="newUser.mobileNumber"
                              required
                            />
                            <div
                              class="text-danger text-red"
                              *ngIf="
                                inputPhoneedit.invalid &&
                                (inputPhoneedit.dirty || inputPhoneedit.touched)
                              "
                              translate
                            >
                            Please enter valid mobile number.
                            </div>
                          </div>
                        </div>
                        <div class="form-group col-sm-4 col-md-4 col-lg-4">
                          <label for="deskPhoneedit" translate
                            >Desk Phone</label
                          >
                          <input
                            type="number"
                            (keyup)="phoneValidation(newUser.phoneNumber, 2)"
                            name="deskPhoneedit"
                            class="form-control form-control-sm"
                            id="deskPhoneedit"
                            placeholder="Desk phone"
                            [(ngModel)]="newUser.phoneNumber"
                          />
                        </div>
                        <div class="form-group col-sm-4 col-md-4 col-lg-4">
                          <div class="form-inline p-0 mt-1">
                            <input
                              class="mr-1"
                              type="checkbox"
                              name="gridCheckEmailEdit"
                              id="gridCheckEmailEdit"
                              [checked]="emailNotification"
                              (change)="emailNotification = !emailNotification"
                            />
                            <label
                              class="form-check-label"
                              for="gridCheckEmailEdit"
                              translate
                            >
                              Email Notification
                            </label>
                          </div>
                        </div>
                        <div class="form-group col-sm-4 col-md-4 col-lg-4">
                          <div class="form-inline p-0 mt-1">
                            <input
                              class="mr-1"
                              type="checkbox"
                              name="gridCheckMobileEdit"
                              id="gridCheckMobileEdit"
                              [checked]="smsNotification"
                              (change)="smsNotification = !smsNotification"
                            />
                            <label
                              class="form-check-label"
                              for="gridCheckMobileEdit"
                              translate
                            >
                              SMS Notification
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <div class="row justify-content-center pt-3">
            <div class="text-center">
              <button
                class="btn btn-sm btn-secondary mr-2"
                (click)="closeCreateUserModal()"
                translate
              >
                <i class="fa fa-times mr-1"></i>Cancel
              </button>
              <button
                class="btn btn-sm btn-primary mr-2"
                (click)="resetEditUserModal()"
                translate
              >
                <i class="fa fa-refresh mr-1"></i>Reset
              </button>
              <button
                class="btn btn-sm btn-success"
                (click)="UpdateUserModal.show()"
                [disabled]="EditUserForm.invalid"
                translate
              >
                <i class="fa fa-save mr-1"></i>Save
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--set password -->
<div
  class="modal fade"
  bsModal
  [config]="{ backdrop: 'static' }"
  #parentModal="bs-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-nested-name1"
>
  <div class="modal-dialog" style="max-width: 400px">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-nested-name1" class="modal-title pull-left" translate>
          Update Password
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="parentModal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <form #setPasswordForm="ngForm">
              <div class="form-row">
                <div class="form-row col-md-12 mb-2 ml-1">
                  <label
                    class="col-5 p-0"
                    style="justify-content: start"
                    for="inputNewPassword"
                    translate
                    >New Password
                  </label>
                  <input
                    type="password"
                    #inputNewPassword
                    name="inputNewPassword"
                    class="form-control form-control-sm mr-3 col-6 forellipsis"
                    id="inputNewPassword"
                    placeholder="New Password"
                    [(ngModel)]="setPasswordObj.newPassword"
                    required
                  />
                  <span
                    *ngIf="inputNewPassword.type == 'password'"
                    class="my-1 mr-auto show-hide-password"
                    (click)="inputNewPassword.type = 'text'"
                    ><i class="fa fa-eye" aria-hidden="true"></i
                  ></span>
                  <span
                    *ngIf="inputNewPassword.type == 'text'"
                    class="my-1 mr-auto show-hide-password"
                    (click)="inputNewPassword.type = 'password'"
                    ><i class="fa fa-eye-slash" aria-hidden="true"></i
                  ></span>
                  <i
                    class="fa fa-info-circle m-auto"
                    style="color: #969696"
                    [tooltip]="passwordrules"
                    containerClass="tooltip-window"
                    placement="bottom"
                  ></i>
                </div>
                <div class="form-row col-md-12 mb-3 ml-1">
                  <label
                    class="col-5 p-0"
                    style="justify-content: start"
                    for="inputConfirmNewPass"
                    >Confirm New Password</label
                  >
                  <input
                    type="password"
                    #inputConfirmNewPass
                    name="inputConfirmNewPass"
                    class="form-control form-control-sm mr-3 col-6 forellipsis"
                    id="inputConfirmNewPass"
                    placeholder="Confirm New Password"
                    [(ngModel)]="setPasswordObj.confirmNewPassword"
                    required
                  />
                  <span
                    *ngIf="inputConfirmNewPass.type == 'password'"
                    class="my-1 show-hide-password"
                    (click)="inputConfirmNewPass.type = 'text'"
                    ><i class="fa fa-eye" aria-hidden="true"></i
                  ></span>
                  <span
                    *ngIf="inputConfirmNewPass.type == 'text'"
                    class="my-1 show-hide-password"
                    (click)="inputConfirmNewPass.type = 'password'"
                    ><i class="fa fa-eye-slash" aria-hidden="true"></i
                  ></span>
                </div>
              </div>
            </form>
            <div class="row justify-content-center">
              <div class="text-center">
                <button
                  type="button"
                  class="btn btn-secondary btn-sm mr-2"
                  (click)="parentModal.hide()"
                  translate
                >
                  <i class="fa fa-times mr-1"></i>Cancel
                </button>
                <button
                  type="button"
                  class="btn btn-success btn-sm"
                  (click)="validateSetPassword()"
                  translate
                >
                  <i class="fa fa-check mr-1"></i>Confirm</button
                ><!-- [disabled]="setPasswordForm.invalid" -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Confirm Set Password -->
<div
  class="modal fade"
  bsModal
  [config]="{ backdrop: 'static' }"
  #childModal="bs-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-nested-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-nested-name2" class="modal-title pull-left" translate>
          Confirm Password
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="childModal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label translate>Are you sure?</label>
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="setPassword()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="childModal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Lock -->
<div
  bsModal
  #smModal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Confirmation
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="smModal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label translate>Are you sure to lock the user?</label>
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="lockUser()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="smModal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Unlock -->
<div
  bsModal
  #lgModal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Confirmation
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="lgModal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label translate>Are you sure to unlock the user?</label>
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="unlockUser()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="lgModal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Deactive -->
<div
  bsModal
  #sm1Modal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Confirmation
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="sm1Modal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label translate>Are you sure to deactivate the user?</label>
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="deactivateUser()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="sm1Modal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Activate -->
<div
  bsModal
  #sm2Modal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Confirmation
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="sm2Modal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label for="activateUsers" translate
          >Are you sure to activate the user?</label
        >
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="activateUser()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="sm2Modal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Terminate role -->
<div
  bsModal
  #lg1Modal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Confirmation
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="lg1Modal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label for="terminateUser" translate
          >Do you really want to terminate the role for User?</label
        >
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="terminateRole()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="lg1Modal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Assign role -->
<div
  bsModal
  #lg2Modal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Confirmation
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="lg2Modal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label for="assignRole" translate
          >Do you really want to assign the role to the User?</label
        >
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="assignRole()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="lg2Modal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Save Create User -->
<div
  bsModal
  #saveUserModal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  style="background: #00000070"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm" style="margin-top: 140px">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Save New User
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="saveUserActivate()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label for="newUsers" translate
          >Are you sure to save the new User?</label
        >
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="saveNewUser()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="saveUserActivate()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Save Edit User -->
<div
  bsModal
  #UpdateUserModal="bs-modal"
  [config]="{ backdrop: 'static' }"
  class="modal fade"
  style="background: #00000070"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-sizes-name2"
>
  <div class="modal-dialog modal-sm" style="margin-top: 140px">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 id="dialog-sizes-name2" class="modal-title pull-left" translate>
          Update User
        </h5>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="UpdateUserModal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label for="updateUser" translate
          >Are you sure to update the User?</label
        >
        <div class="text-center my-3">
          <button
            type="button"
            class="btn btn-success mr-4"
            (click)="updateUser()"
            translate
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="UpdateUserModal.hide()"
            translate
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Password Rules Info Tooltip -->
<ng-template #passwordrules>
  <ul *ngIf="passwordRules" class="list-group">
    <li *ngIf="passwordRules.minLength" class="list-group-item bg-dark p-1">
      Password must be atleast {{ passwordRules.minLength }} characters in
      length
    </li>
    <li
      *ngIf="passwordRules.mustHaveNumber == 'Y'"
      class="list-group-item bg-dark p-1"
      translate
    >
      Password must contain atleast one number
    </li>
    <li
      *ngIf="passwordRules.mustHaveSpecialChar == 'Y'"
      class="list-group-item bg-dark p-1"
      translate
    >
      Password must contain atleast one Special Character
    </li>
    <li
      *ngIf="passwordRules.containsName == 'N'"
      class="list-group-item bg-dark p-1"
      translate
    >
      Password cannot contain Name of the user
    </li>
    <li
      *ngIf="passwordRules.containsLoginId == 'N'"
      class="list-group-item bg-dark p-1"
      translate
    >
      Password cannot contain LoginId of the user
    </li>
    <li
      *ngIf="passwordRules.startWithNumber == 'N'"
      class="list-group-item bg-dark p-1"
      translate
    >
      Password cannot start with a number
    </li>
    <li
      *ngIf="passwordRules.startWithChar == 'N'"
      class="list-group-item bg-dark p-1"
      translate
    >
      Password cannot start with special character
    </li>
  </ul>
</ng-template>

<!-- Editable Columns Effective/Termination Date Info Tooltip -->
<ng-template #editableDates>
  <p translate>
    Double click on a cell in Effective Date Termination Date column to manually
    set the date and press Enter
  </p>
</ng-template>

<!--Add Role -->
<div
  class="modal fade"
  bsModal
  [config]="{ backdrop: 'static' }"
  #AddRoleModal="bs-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-nested-name1"
>
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-purple pt-1 pb-1">
        <h5 class="mb-0 ml-auto" *ngIf="isAddForMenu == true">Add Role</h5>
        <h5 class="mb-0 ml-auto" *ngIf="isAddForMenu == false">Edit Role</h5>
        <button
          type="button"
          class="close pull-right text-white"
          aria-label="Close"
          (click)="AddRoleModal.hide()"
        >
          <span aria-hidden="true" class="">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <form #addRoleForm="ngForm">
              <div class="form-inline px-0 ml-1 mt-3">
                <label for="addRole" class="mr-3"
                  >Role Name<span class="text-danger">*</span></label
                >
                <input
                  type="text"
                  name="role"
                  class="
                    form-control form-control-sm
                    col-md-9 col-lg-9 col-sm-12
                  "
                  [(ngModel)]="newRoleName"
                  [disabled]="isEdit"
                  required
                />
              </div>
              <div class="form-inline px-0 ml-1 mt-3">
                <label for="description" class="mr-3">Description</label>
                <textarea
                  id="description"
                  name="description"
                  class="
                    form-control form-control-sm
                    col-md-9 col-lg-9 col-sm-12
                    desc-margin-left
                  "
                  rows="2"
                  cols="42"
                  [(ngModel)]="roleDescription"
                ></textarea>
              </div>
            </form>
          </div>
          <div class="col-12">
            <div class="card mt-2">
              <div class="card-header">
                <h5 class="mb-0 ml-auto" *ngIf="isAddForMenu == true">
                  Add Permissions
                </h5>
                <h5 class="mb-0 ml-auto" *ngIf="isAddForMenu == false">
                  Edit Permissions
                </h5>
              </div>
              <div class="card-body mt-2 p-0">
                <form [formGroup]="myForm">
                  <ng-multiselect-dropdown
                    [placeholder]="'Add Permissions'"
                    [settings]="dropdownSettings"
                    formControlName="addedPermission"
                    [data]="newUIMenuList"
                    [(ngModel)]="selectedItems"
                    (onSelect)="onItemSelect($event)"
                    (onSelectAll)="onSelectAll($event)"
                    (onDeSelect)="onItemDeSelect($event)"
                  ></ng-multiselect-dropdown>
                </form>
              </div>
            </div>
            <div class="row justify-content-center mt-3">
              <div class="text-center">
                <button
                  type="button"
                  class="btn btn-secondary btn-sm mr-2"
                  (click)="AddRoleModal.hide()"
                  translate
                >
                  <i class="fa fa-times mr-1"></i>Cancel
                </button>
                <button
                  type="button"
                  class="btn btn-success btn-sm"
                  (click)="saveRole()"
                  [disabled]="addRoleForm.invalid"
                >
                  <i class="fa fa-save mr-1"></i>{{ buttonText }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
